<!DOCTYPE html>
<html lang="tr" id="htmlRoot">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>TobiList â€” Anime, Manga & Webtoon Takip Platformu | Ãœcretsiz</title>

    <meta name="description" content="TobiList ile anime, manga ve webtoon'larÄ±nÄ± kolayca takip et. KiÅŸisel liste oluÅŸtur, puan ver, istatistiklerini gÃ¶r. Tamamen Ã¼cretsiz, TÃ¼rkÃ§e anime takip uygulamasÄ±.">
    <meta name="keywords" content="anime takip, manga takip, webtoon takip, anime listesi, mal alternatif, anime app tÃ¼rkÃ§e, anime izleme listesi, anime tracker, anilist alternatif tÃ¼rkÃ§e">
    <meta name="author" content="TobiList">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="language" content="Turkish">
    <meta name="revisit-after" content="3 days">
    <meta name="theme-color" content="#ff3366">

    <!-- ===== CANONICAL ===== -->
    <link rel="canonical" href="https://tobilist.com/">

    <!-- ===== OPEN GRAPH (Facebook, Discord, WhatsApp) ===== -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tobilist.com/">
    <meta property="og:title" content="TobiList â€” Anime, Manga & Webtoon Takip Platformu">
    <meta property="og:description" content="Anime, manga ve webtoon'larÄ±nÄ± Ã¼cretsiz takip et. KiÅŸisel liste, puan sistemi, baÅŸarÄ±mlar ve Ã§ok daha fazlasÄ±!">
    <meta property="og:image" content="https://tobilist.com/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="TobiList - Anime & Manga Takip Platformu">
    <meta property="og:site_name" content="TobiList">
    <meta property="og:locale" content="tr_TR">

    <!-- ===== TWITTER CARD ===== -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://tobilist.com/">
    <meta name="twitter:title" content="TobiList â€” Anime, Manga & Webtoon Takip">
    <meta name="twitter:description" content="Anime, manga ve webtoon'larÄ±nÄ± Ã¼cretsiz takip et. TÃ¼rkÃ§e anime tracker!">
    <meta name="twitter:image" content="https://tobilist.com/og-image.png">

    <!-- ===== PWA / APP ===== -->
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="TobiList">
    <meta name="application-name" content="TobiList">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- ===== SCHEMA.ORG YAPISAL VERÄ° ===== -->
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@graph": [
        {
        "@type": "WebApplication",
        "@id": "https://tobilist.com/#webapp",
        "name": "TobiList",
        "description": "Anime, manga ve webtoon takip platformu. Ãœcretsiz kiÅŸisel liste oluÅŸtur, puan ver, istatistiklerini takip et.",
        "url": "https://tobilist.com/",
        "applicationCategory": "EntertainmentApplication",
        "operatingSystem": "Web, iOS, Android",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "TRY"
        },
        "featureList": [
            "Anime takip listesi",
            "Manga takip listesi",
            "Webtoon takip listesi",
            "XP ve level sistemi",
            "BaÅŸarÄ±m rozetleri",
            "KiÅŸisel istatistikler",
            "Takvim gÃ¶rÃ¼nÃ¼mÃ¼",
            "AI Ã¶neriler"
        ],
        "inLanguage": "tr",
        "audience": {
            "@type": "Audience",
            "audienceType": "Anime ve manga hayranlarÄ±"
        }
        },
        {
        "@type": "WebSite",
        "@id": "https://tobilist.com/#website",
        "url": "https://tobilist.com/",
        "name": "TobiList",
        "description": "TÃ¼rkÃ§e anime, manga ve webtoon takip platformu",
        "inLanguage": "tr",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://tobilist.com/?search={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        }
        },
        {
        "@type": "Organization",
        "@id": "https://tobilist.com/#organization",
        "name": "TobiList",
        "url": "https://tobilist.com/",
        "logo": {
            "@type": "ImageObject",
            "url": "https://tobilist.com/icons/logo-512.png",
            "width": 512,
            "height": 512
        }
        },
        {
        "@type": "FAQPage",
        "mainEntity": [
            {
            "@type": "Question",
            "name": "TobiList Ã¼cretsiz mi?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Evet, TobiList tamamen Ã¼cretsizdir. KayÄ±t olup hemen kullanmaya baÅŸlayabilirsiniz."
            }
            },
            {
            "@type": "Question",
            "name": "TobiList'e nasÄ±l kayÄ±t olurum?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Siteye girerek 'KayÄ±t Ol' butonuna tÄ±klayÄ±n, e-posta ve ÅŸifrenizle Ã¼cretsiz hesap oluÅŸturun."
            }
            },
            {
            "@type": "Question",
            "name": "Hangi iÃ§erikleri takip edebilirim?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "TobiList ile anime, manga ve webtoon takip edebilirsiniz. Ä°Ã§eriklere puan verebilir, durumlarÄ±nÄ± gÃ¼ncelleyebilirsiniz."
            }
            }
        ]
        }
    ]
    }
    </script>

    <!-- ===== PRECONNECT (hÄ±z iÃ§in) ===== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://qhfjpuwduuxzojurngte.supabase.co">

    <!-- ===== FONTS (optimize) ===== -->
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@400;500;700;900&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/auth.css">

    <style>
    /* ===== HERO CHIPS ===== */
    .hero-chips { display:flex; flex-wrap:wrap; gap:.5rem; margin-top:1.1rem; }
    .hero-chip {
        background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
        border-radius:20px; padding:.28rem .75rem; font-size:.78rem; font-weight:600;
        color:var(--text-secondary,#8892a4); backdrop-filter:blur(4px);
        transition:all .2s;
    }
    .hero-chip:hover { background:rgba(255,51,102,.12); border-color:rgba(255,51,102,.3); color:#ff3366; }

    /* ===== PLATFORM STATS BAR ===== */
    .platform-stats-bar {
        display:flex; align-items:center; justify-content:center; flex-wrap:wrap; gap:0;
        background:linear-gradient(135deg,rgba(255,51,102,.06),rgba(0,212,255,.04));
        border:1px solid rgba(255,255,255,.07); border-radius:14px;
        padding:.9rem 1.5rem; margin:1rem 0 1.5rem; gap:.2rem;
    }
    .psb-item { display:flex; align-items:center; gap:.5rem; padding:.2rem .8rem; }
    .psb-dot { width:7px; height:7px; background:#10b981; border-radius:50%; animation:pulseDot 2s infinite; flex-shrink:0; }
    @keyframes pulseDot { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.4;transform:scale(.7)} }
    .psb-num { font-size:1.1rem; font-weight:900; background:linear-gradient(135deg,#ff3366,#00d4ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }
    .psb-label { font-size:.75rem; color:var(--text-secondary,#8892a4); font-weight:500; }
    .psb-divider { width:1px; height:28px; background:rgba(255,255,255,.08); margin:0 .3rem; }

    /* ===== AD SLOTS ===== */
    .ad-slot { margin:1.5rem 0; }
    .ad-slot-subtle .ad-inner {
        position:relative; border-radius:10px; overflow:hidden;
        background:rgba(255,255,255,.02); border:1px solid rgba(255,255,255,.05);
    }
    .ad-tag {
        position:absolute; top:6px; right:8px; font-size:.62rem; color:rgba(255,255,255,.2);
        letter-spacing:1px; text-transform:uppercase; font-weight:600; z-index:1;
        pointer-events:none;
    }
    .ad-placeholder { width:100%; }
    .ad-placeholder-inner {
        height:60px; display:flex; align-items:center; justify-content:center;
        /* GerÃ§ek AdSense gelince bu div kaldÄ±rÄ±lÄ±r */
    }

    /* ===== FEATURES SECTION ===== */
    .features-section { margin:2.5rem 0; }
    .features-header { text-align:center; margin-bottom:1.5rem; }
    .features-title { font-size:1.5rem; font-weight:900; margin-bottom:.4rem; }
    .features-sub { font-size:.88rem; color:var(--text-secondary,#8892a4); }
    .features-grid {
        display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1rem;
    }
    .feature-card {
        display:flex; align-items:center; gap:1rem;
        background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.07);
        border-radius:14px; padding:1.1rem 1.2rem; cursor:pointer;
        transition:all .25s; position:relative; overflow:hidden;
    }
    .feature-card:hover {
        background:rgba(255,51,102,.06); border-color:rgba(255,51,102,.2);
        transform:translateY(-2px); box-shadow:0 8px 30px rgba(255,51,102,.1);
    }
    .feature-icon { font-size:1.6rem; flex-shrink:0; }
    .feature-title { font-size:.9rem; font-weight:700; margin-bottom:.2rem; }
    .feature-desc { font-size:.78rem; color:var(--text-secondary,#8892a4); line-height:1.5; }
    .feature-arrow { margin-left:auto; color:rgba(255,255,255,.2); font-size:1rem; flex-shrink:0; transition:all .2s; }
    .feature-card:hover .feature-arrow { color:#ff3366; transform:translateX(3px); }

    /* ===== COMMUNITY SECTION ===== */
    .community-section { margin:2.5rem 0; }
    .community-header { text-align:center; margin-bottom:1.5rem; }
    .community-grid {
        display:grid; grid-template-columns:1fr 1fr 1fr; gap:1.2rem;
    }
    @media(max-width:900px) { .community-grid { grid-template-columns:1fr 1fr; } }
    @media(max-width:600px) { .community-grid { grid-template-columns:1fr; } .psb-divider{display:none;} .psb-item{padding:.2rem .4rem;} }
    .community-card {
        background:rgba(255,255,255,.03); border:1px solid rgba(255,255,255,.07);
        border-radius:16px; padding:1.3rem;
    }
    .cc-title { font-size:.95rem; font-weight:700; margin-bottom:1rem; }

    /* Leaderboard */
    .lb-loading { text-align:center; color:var(--text-secondary,#8892a4); font-size:.85rem; padding:1rem; }
    .lb-item {
        display:flex; align-items:center; gap:.7rem; padding:.55rem 0;
        border-bottom:1px solid rgba(255,255,255,.05);
    }
    .lb-item:last-child { border-bottom:none; }
    .lb-rank { font-size:.75rem; font-weight:900; width:20px; text-align:center; color:var(--text-secondary,#8892a4); }
    .lb-rank.gold   { color:#fbbf24; }
    .lb-rank.silver { color:#94a3b8; }
    .lb-rank.bronze { color:#cd7c4a; }
    .lb-av { width:28px; height:28px; border-radius:50%; background:linear-gradient(135deg,#ff3366,#7c3aed); display:flex; align-items:center; justify-content:center; font-size:.85rem; flex-shrink:0; }
    .lb-name { font-size:.84rem; font-weight:600; flex:1; min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .lb-xp { font-size:.75rem; font-weight:700; color:#fbbf24; flex-shrink:0; }

    /* Community stats */
    .comm-stat-list { display:flex; flex-direction:column; gap:.1rem; }
    .comm-stat-item { display:flex; align-items:center; justify-content:space-between; padding:.6rem 0; border-bottom:1px solid rgba(255,255,255,.05); }
    .comm-stat-item:last-child { border-bottom:none; }
    .csi-label { font-size:.82rem; color:var(--text-secondary,#8892a4); }
    .csi-val { font-size:.9rem; font-weight:700; background:linear-gradient(135deg,#ff3366,#00d4ff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text; }

    /* Join card */
    .join-card { display:flex; flex-direction:column; }
    .join-card-icon { font-size:2.2rem; margin-bottom:.8rem; }
    .join-badges { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:1rem; }
    .jb { background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.08); border-radius:20px; padding:.2rem .6rem; font-size:.72rem; color:var(--text-secondary,#8892a4); font-weight:600; }

    /* ===== FOOTER ===== */
    .site-footer { text-align:center; padding:2rem 1rem 1rem; border-top:1px solid rgba(255,255,255,.06); margin-top:1rem; }
    .footer-logo { display:flex; align-items:center; justify-content:center; gap:.4rem; margin-bottom:.3rem; }
    .footer-links { display:flex; align-items:center; justify-content:center; gap:.5rem; margin-top:.5rem; font-size:.78rem; color:rgba(255,255,255,.2); }
    .footer-links span:not(:nth-child(even)):hover { color:rgba(255,255,255,.5); }
    </style>

    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
    <script>
        const SUPABASE_URL = 'https://qhfjpuwduuxzojurngte.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFoZmpwdXdkdXV4em9qdXJuZ3RlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2NzU1MTksImV4cCI6MjA4NzI1MTUxOX0.lgtxEwGFW07P1vY9Soid2s_sM47jODk_nsUECznHSFA';
        try {
            window.supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        } catch(e) {
            console.warn('Supabase init error:', e);
            window.supabaseClient = null;
        }
    </script>
</head>
<body data-theme="dark">

    <!-- ========== AUTH MODAL ========== -->
    <div id="authModal" class="auth-modal" style="display:none;">
        <div class="auth-modal-backdrop"></div>
        <div class="auth-modal-content">
            <button class="auth-modal-close" onclick="closeAuthModal()" title="Kapat">âœ•</button>

            <!-- Login -->
            <div id="modalLoginBox">
                <div class="auth-modal-header">
                    <span class="auth-modal-logo" style="display:flex;align-items:center;gap:.4rem;justify-content:center;"><svg width="22" height="22" viewBox="0 0 40 40" fill="none"><ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/><path d="M20 13 Q24 13 26 17 Q28 21 24 23 Q20 25 18 22 Q16 19 18 17 Q19 15 20 14" stroke="#fff" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.7"/><ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/><circle cx="25.5" cy="16.5" r="1.2" fill="rgba(255,255,255,0.5)"/><ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="1.5" fill="none"/></svg>TOBÄ°LÄ°ST</span>
                    <h3>Tekrar hoÅŸ geldin!</h3>
                    <p>HesabÄ±na giriÅŸ yap ve devam et</p>
                </div>
                <form id="loginForm" onsubmit="handleLogin(event)" autocomplete="on">
                    <div class="auth-field">
                        <label for="loginEmail">ğŸ“§ E-posta</label>
                        <input type="email" id="loginEmail" name="email" placeholder="ornek@mail.com" required autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label for="loginPassword">ğŸ”’ Åifre</label>
                        <div class="password-wrapper">
                            <input type="password" id="loginPassword" name="password" placeholder="Åifreniz" required autocomplete="current-password">
                            <button type="button" class="toggle-pw" onclick="togglePassword('loginPassword', this)" title="Åifreyi gÃ¶ster/gizle">ğŸ‘ï¸</button>
                        </div>
                    </div>
                    <div class="auth-options">
                        <label class="remember-me">
                            <input type="checkbox" id="rememberMe" checked>
                            Beni hatÄ±rla
                        </label>
                        <button type="button" class="forgot-pw" onclick="showModalForgot()">Åifremi unuttum</button>
                    </div>
                    <div id="loginError" class="auth-error"></div>
                    <button type="submit" class="auth-btn auth-btn-primary" id="loginBtn">
                        <span>GiriÅŸ Yap</span><span class="btn-arrow">â†’</span>
                    </button>
                </form>
                <div class="auth-divider"><span>veya</span></div>
                <div class="auth-switch">HesabÄ±n yok mu? <span onclick="showModalRegister()">KayÄ±t ol â†’</span></div>
            </div>

            <!-- Register -->
            <div id="modalRegisterBox" style="display:none;">
                <div class="auth-modal-header">
                    <span class="auth-modal-logo" style="display:flex;align-items:center;gap:.4rem;justify-content:center;"><svg width="22" height="22" viewBox="0 0 40 40" fill="none"><ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/><path d="M20 13 Q24 13 26 17 Q28 21 24 23 Q20 25 18 22 Q16 19 18 17 Q19 15 20 14" stroke="#fff" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.7"/><ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/><circle cx="25.5" cy="16.5" r="1.2" fill="rgba(255,255,255,0.5)"/><ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="1.5" fill="none"/></svg>TOBÄ°LÄ°ST</span>
                    <h3>Hesap oluÅŸtur</h3>
                    <p>Ãœcretsiz kayÄ±t ol, koleksiyonunu baÅŸlat</p>
                </div>
                <form id="registerForm" onsubmit="handleRegister(event)" autocomplete="on">
                    <div class="auth-field">
                        <label for="registerUsername">ğŸ‘¤ KullanÄ±cÄ± AdÄ±</label>
                        <input type="text" id="registerUsername" name="username" placeholder="anime_hunter" required minlength="3" maxlength="20" autocomplete="username">
                    </div>
                    <div class="auth-field">
                        <label for="registerEmail">ğŸ“§ E-posta</label>
                        <input type="email" id="registerEmail" name="email" placeholder="ornek@mail.com" required autocomplete="email">
                    </div>
                    <div class="auth-field">
                        <label for="registerPassword">ğŸ”’ Åifre</label>
                        <div class="password-wrapper">
                            <input type="password" id="registerPassword" name="password" placeholder="En az 6 karakter" required minlength="6" autocomplete="new-password" oninput="checkPasswordStrength(this.value)">
                            <button type="button" class="toggle-pw" onclick="togglePassword('registerPassword', this)">ğŸ‘ï¸</button>
                        </div>
                        <div class="password-strength"><div class="strength-bar" id="strengthBar"></div></div>
                        <div class="strength-text" id="strengthText"></div>
                    </div>
                    <div class="auth-field">
                        <label for="registerPasswordConfirm">ğŸ”’ Åifre Tekrar</label>
                        <div class="password-wrapper">
                            <input type="password" id="registerPasswordConfirm" name="confirm" placeholder="Åifrenizi tekrar girin" required autocomplete="new-password">
                            <button type="button" class="toggle-pw" onclick="togglePassword('registerPasswordConfirm', this)">ğŸ‘ï¸</button>
                        </div>
                    </div>
                    <div id="registerError" class="auth-error"></div>
                    <button type="submit" class="auth-btn auth-btn-primary" id="registerBtn">
                        <span>Hesap OluÅŸtur</span><span class="btn-arrow">â†’</span>
                    </button>
                </form>
                <div class="auth-switch">Zaten hesabÄ±n var mÄ±? <span onclick="showModalLogin()">GiriÅŸ yap â†’</span></div>
            </div>

            <!-- Forgot Password -->
            <div id="modalForgotBox" style="display:none;">
                <div class="auth-modal-header">
                    <span class="auth-modal-logo" style="display:flex;align-items:center;gap:.4rem;justify-content:center;"><svg width="22" height="22" viewBox="0 0 40 40" fill="none"><ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/><path d="M20 13 Q24 13 26 17 Q28 21 24 23 Q20 25 18 22 Q16 19 18 17 Q19 15 20 14" stroke="#fff" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.7"/><ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/><circle cx="25.5" cy="16.5" r="1.2" fill="rgba(255,255,255,0.5)"/><ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="1.5" fill="none"/></svg>TOBÄ°LÄ°ST</span>
                    <h3>Åifre SÄ±fÄ±rlama</h3>
                    <p>E-postanÄ±za sÄ±fÄ±rlama baÄŸlantÄ±sÄ± gÃ¶nderilecek</p>
                </div>
                <div class="auth-field">
                    <label for="forgotEmail">ğŸ“§ E-posta</label>
                    <input type="email" id="forgotEmail" placeholder="ornek@mail.com" autocomplete="email">
                </div>
                <div id="forgotError" class="auth-error"></div>
                <div id="forgotSuccess" class="auth-success"></div>
                <button class="auth-btn auth-btn-primary" onclick="handleForgotPassword()">
                    <span>SÄ±fÄ±rlama Linki GÃ¶nder</span>
                </button>
                <div class="auth-switch" style="margin-top:1rem;">
                    <span onclick="showModalLogin()">â† GiriÅŸ ekranÄ±na dÃ¶n</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ========== MAIN APP ========== -->
    <div id="mainApp">

        <!-- Loading Screen -->
        <div class="loading-screen" id="loadingScreen">
            <div class="loading-logo" style="display:flex;align-items:center;gap:.5rem;justify-content:center;"><svg width="36" height="36" viewBox="0 0 40 40" fill="none"><ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/><path d="M20 13 Q24 13 26 17 Q28 21 24 23 Q20 25 18 22 Q16 19 18 17 Q19 15 20 14" stroke="#fff" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.7"/><ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/><circle cx="25.5" cy="16.5" r="1.2" fill="rgba(255,255,255,0.5)"/><ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="1.5" fill="none"/></svg>TOBÄ°LÄ°ST</div>
            <div class="loader"></div>
            <div class="loading-text">YÃ¼kleniyor...</div>
        </div>

        <!-- Banners -->
        <div class="offline-banner" id="offlineBanner">âš ï¸ Ä°nternet baÄŸlantÄ±nÄ±z yok â€” Offline modda Ã§alÄ±ÅŸÄ±yorsunuz</div>

        <div class="install-banner" id="installBanner">
            <div>
                <div class="install-title">ğŸ“± UygulamayÄ± YÃ¼kleyin</div>
                <div style="font-size:0.85rem;">CihazÄ±nÄ±za ekleyin, offline kullanÄ±n!</div>
            </div>
            <div class="install-actions">
                <button class="btn-install" onclick="installPWA()">YÃ¼kle</button>
                <button class="btn-dismiss" onclick="dismissInstall()">Daha Sonra</button>
            </div>
        </div>

        <div class="guest-app-banner" id="guestAppBanner" style="display:none;">
            <svg width="16" height="16" viewBox="0 0 40 40" fill="none" style="vertical-align:middle"><ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/><ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/><ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="2" fill="none"/></svg> Misafir modundasÄ±nÄ±z â€”
            <strong>KayÄ±t ol veya giriÅŸ yap</strong> ile listeni kaydet!
            <button onclick="openAuthModal('register')">KayÄ±t Ol</button>
            <button onclick="openAuthModal('login')" style="background:transparent;border:1px solid rgba(255,255,255,0.4);color:white;padding:0.35rem 0.9rem;border-radius:6px;cursor:pointer;font-size:0.82rem;font-family:'DM Sans',sans-serif;">GiriÅŸ Yap</button>
        </div>

        <div class="container">

            <!-- Header -->
            <header>
                <div class="header-content">
                    <div class="logo-section">
                        <h1 class="logo" onclick="switchSection('home')" style="display:flex;align-items:center;gap:0.4rem;cursor:pointer;">
                            <svg width="32" height="32" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg" style="flex-shrink:0;">
                                <ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/>
                                <ellipse cx="20" cy="21" rx="17" ry="16" fill="url(#tlmg)"/>
                                <path d="M20 13 Q24 13 26 17 Q28 21 24 23 Q20 25 18 22 Q16 19 18 17 Q19 15 20 14" stroke="#fff" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.7"/>
                                <ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/>
                                <circle cx="25.5" cy="16.5" r="1.2" fill="rgba(255,255,255,0.5)"/>
                                <ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="1.5" fill="none"/>
                                <defs>
                                    <radialGradient id="tlmg" cx="35%" cy="30%">
                                        <stop offset="0%" stop-color="#ff8c00" stop-opacity="0.6"/>
                                        <stop offset="100%" stop-color="#E8630A" stop-opacity="0"/>
                                    </radialGradient>
                                </defs>
                            </svg>
                            TobiList
                        </h1>
                        <div class="level-badge" id="levelBadge" style="display:none;">
                            <span>ğŸ†</span>
                            <div class="xp-container">
                                <div class="level-number">Lv. <span id="userLevel">1</span></div>
                                <div class="xp-bar"><div class="xp-fill" id="xpFill" style="width:0%"></div></div>
                                <div class="xp-text"><span id="currentXP">0</span>/<span id="nextLevelXP">100</span> XP</div>
                            </div>
                        </div>
                    </div>
                    <div class="header-actions">
                        <div class="stats-badge" id="streakBadge" style="display:none;">ğŸ”¥ <strong id="streakDays">0</strong> gÃ¼n</div>
                        <div class="stats-badge" id="totalBadge" style="display:none;">ğŸ“š <strong id="totalCount">0</strong></div>
                        <select class="language-selector" id="languageSelect" onchange="changeLanguage()">
                            <option value="tr">ğŸ‡¹ğŸ‡· TR</option>
                            <option value="en">ğŸ‡¬ğŸ‡§ EN</option>
                        </select>
                        <div id="guestHeaderBtns" style="display:flex;gap:0.5rem;align-items:center;">
                            <button class="btn btn-ghost" onclick="openAuthModal('login')">GiriÅŸ Yap</button>
                            <button class="btn btn-primary" onclick="openAuthModal('register')">KayÄ±t Ol</button>
                        </div>
                        <div class="user-menu-wrapper" id="userMenuWrapper" style="display:none;">
                            <div class="user-avatar-btn" onclick="toggleUserDropdown()">
                                <span id="headerAvatar">ğŸ‘¤</span>
                                <span id="headerUsername">KullanÄ±cÄ±</span>
                                <span class="dropdown-arrow">â–¾</span>
                            </div>
                            <div class="user-dropdown" id="userDropdown">
                                <div class="dropdown-profile">
                                    <div class="dropdown-avatar" id="dropdownAvatar">ğŸ‘¤</div>
                                    <div>
                                        <div class="dropdown-name" id="dropdownName">-</div>
                                        <div class="dropdown-email" id="dropdownEmail">-</div>
                                    </div>
                                </div>
                                <div class="dropdown-divider"></div>
                                <div class="dropdown-item" onclick="switchSection('profile'); closeUserDropdown()">ğŸ‘¤ Profilim</div>
                                <div class="dropdown-item" onclick="switchSection('settings'); closeUserDropdown()">âš™ï¸ Ayarlar</div>
                                <div class="dropdown-item" onclick="switchSection('achievements'); closeUserDropdown()">ğŸ† BaÅŸarÄ±mlar</div>
                                <div class="dropdown-divider"></div>
                                <div class="dropdown-item danger" onclick="handleLogout()">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</div>
                            </div>
                        </div>
                        <button class="btn btn-primary" id="addContentBtn" onclick="openAddModal()" style="display:none;">+ Ekle</button>
                    </div>
                </div>
            </header>

            <!-- Navigation -->
            <nav>
                <div class="nav-tabs">
                    <button class="nav-tab active" onclick="switchSection('home')" data-section="home">ğŸ  <span data-i18n="home">Ana Sayfa</span></button>
                    <button class="nav-tab locked-tab" onclick="requireAuth('library')" data-section="library">ğŸ“š <span data-i18n="library">KÃ¼tÃ¼phanem</span></button>
                    <button class="nav-tab" onclick="switchSection('discover')" data-section="discover">ğŸ” <span data-i18n="discover">KeÅŸfet</span></button>
                    <button class="nav-tab locked-tab" onclick="requireAuth('calendar')" data-section="calendar">ğŸ“… <span data-i18n="calendar">Takvim</span></button>
                    <button class="nav-tab locked-tab" onclick="requireAuth('analytics')" data-section="analytics">ğŸ“Š <span data-i18n="analytics">Analitik</span></button>
                    <button class="nav-tab locked-tab" onclick="requireAuth('ai')" data-section="ai">ğŸ¤– <span data-i18n="ai">AI Ã–neriler</span></button>
                    <button class="nav-tab locked-tab" onclick="requireAuth('achievements')" data-section="achievements">ğŸ† <span data-i18n="achievements">BaÅŸarÄ±mlar</span></button>
                </div>
            </nav>

            <div class="main-content">

                <!-- HOME -->
                <div id="homeSection" class="section active">

                    <!-- HERO BANNER -->
                    <div class="anilist-banner">
                        <div class="banner-bg-anim">
                            <div class="banner-particle p1"></div>
                            <div class="banner-particle p2"></div>
                            <div class="banner-particle p3"></div>
                        </div>
                        <div class="banner-left">
                            <div class="banner-greeting" id="bannerGreeting">HoÅŸ geldiniz ğŸ‘‹</div>
                            <h2 class="banner-title">Anime DÃ¼nyanÄ±<br><span class="gradient-text">Takip Et & KeÅŸfet</span></h2>
                            <p class="banner-sub">500+ anime, manga ve webtoon arasÄ±ndan seÃ§. Listeni oluÅŸtur, puan ver, level atla.</p>
                            <div class="banner-actions" id="bannerActions"></div>
                            <!-- Feature chips -->
                            <div class="hero-chips">
                                <span class="hero-chip">ğŸ¤– AI Ã–neriler</span>
                                <span class="hero-chip">ğŸ† XP Sistemi</span>
                                <span class="hero-chip">ğŸ“… YayÄ±n Takvimi</span>
                                <span class="hero-chip">ğŸ“Š Analitik</span>
                            </div>
                        </div>
                        <div class="banner-right">
                            <div class="banner-stat-cards">
                                <div class="bsc"><div class="bsc-icon">ğŸ¬</div><div class="bsc-num" id="heroAnimeCount">0</div><div class="bsc-label">Anime</div></div>
                                <div class="bsc"><div class="bsc-icon">ğŸ“–</div><div class="bsc-num" id="heroMangaCount">0</div><div class="bsc-label">Manga</div></div>
                                <div class="bsc"><div class="bsc-icon">ğŸ“±</div><div class="bsc-num" id="heroWebtoonCount">0</div><div class="bsc-label">Webtoon</div></div>
                                <div class="bsc"><div class="bsc-icon">â­</div><div class="bsc-num" id="heroXP">0</div><div class="bsc-label">Toplam XP</div></div>
                            </div>
                        </div>
                    </div>

                    <!-- PLATFORM LIVE STATS (canlÄ± istatistik) -->
                    <div class="platform-stats-bar" id="platformStatsBar">
                        <div class="psb-item">
                            <span class="psb-dot"></span>
                            <span class="psb-num" id="liveUserCount">â€”</span>
                            <span class="psb-label">KayÄ±tlÄ± KullanÄ±cÄ±</span>
                        </div>
                        <div class="psb-divider"></div>
                        <div class="psb-item">
                            <span class="psb-num" id="liveEntryCount">â€”</span>
                            <span class="psb-label">Toplam Takip</span>
                        </div>
                        <div class="psb-divider"></div>
                        <div class="psb-item">
                            <span class="psb-num" id="liveCompletedCount">â€”</span>
                            <span class="psb-label">Tamamlanan</span>
                        </div>
                        <div class="psb-divider"></div>
                        <div class="psb-item">
                            <span class="psb-num" id="liveXPCount">â€”</span>
                            <span class="psb-label">XP KazanÄ±ldÄ±</span>
                        </div>
                        <div class="psb-divider"></div>
                        <div class="psb-item">
                            <span class="psb-num">500+</span>
                            <span class="psb-label">Ä°Ã§erik</span>
                        </div>
                    </div>

                    <!-- TRENDING -->
                    <div class="home-section-block">
                        <div class="section-header-row">
                            <h3 class="sh-title">ğŸ”¥ Åu An Trend</h3>
                            <button class="sh-more" onclick="switchSection('discover')">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</button>
                        </div>
                        <div class="media-row" id="trendingGrid"></div>
                    </div>

                    <!-- SUBTLE AD â€” Trending altÄ± -->
                    <div class="ad-slot ad-slot-subtle" id="adSlot1">
                        <div class="ad-inner">
                            <span class="ad-tag">Reklam</span>
                            <div class="ad-placeholder">
                                <!-- Google AdSense kodu buraya gelecek -->
                                <!-- <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-XXXXXXXXXXXXXXXX" data-ad-slot="XXXXXXXXXX" data-ad-format="auto" data-full-width-responsive="true"></ins> -->
                                <div class="ad-placeholder-inner">
                                    <span style="color:var(--text-muted);font-size:0.78rem;opacity:0.5;">Reklam AlanÄ± â€” 728Ã—90</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CONTINUE WATCHING -->
                    <div class="home-section-block" id="continueWatchingBlock" style="display:none;">
                        <div class="section-header-row">
                            <h3 class="sh-title">â–¶ï¸ Devam Et</h3>
                            <button class="sh-more" onclick="switchSection('library')">KÃ¼tÃ¼phane â†’</button>
                        </div>
                        <div class="media-row" id="continueWatchingGrid"></div>
                    </div>

                    <!-- QUICK STATS (logged in) -->
                    <div class="quick-stats-row" id="quickStatsRow" style="display:none;">
                        <div class="qs-card"><div class="qs-icon">ğŸ“º</div><div class="qs-val" id="watchingCount">0</div><div class="qs-label">Ä°zliyorum</div></div>
                        <div class="qs-card"><div class="qs-icon">âœ…</div><div class="qs-val" id="completedCount">0</div><div class="qs-label">TamamlandÄ±</div></div>
                        <div class="qs-card"><div class="qs-icon">ğŸ“‹</div><div class="qs-val" id="planToWatchCount">0</div><div class="qs-label">Ä°zlenecek</div></div>
                        <div class="qs-card"><div class="qs-icon">â¸ï¸</div><div class="qs-val" id="onHoldCount">0</div><div class="qs-label">Beklemede</div></div>
                        <div class="qs-card"><div class="qs-icon">â­</div><div class="qs-val" id="avgRatingHome">0.0</div><div class="qs-label">Ort. Puan</div></div>
                        <div class="qs-card"><div class="qs-icon">ğŸ”¥</div><div class="qs-val" id="streakHome">0</div><div class="qs-label">Streak</div></div>
                    </div>

                    <!-- SEASONAL -->
                    <div class="home-section-block">
                        <div class="section-header-row">
                            <h3 class="sh-title">ğŸŒ¸ Bu Sezon PopÃ¼ler</h3>
                            <button class="sh-more" onclick="switchSection('discover')">Hepsi â†’</button>
                        </div>
                        <div class="media-row" id="seasonPopularGrid"></div>
                    </div>

                    <!-- FEATURES SECTION (neden TobiList) -->
                    <div class="features-section">
                        <div class="features-header">
                            <h3 class="features-title">Neden <span class="gradient-text">TobiList?</span></h3>
                            <p class="features-sub">Anime takibini bir Ã¼st seviyeye taÅŸÄ±yan Ã¶zellikler</p>
                        </div>
                        <div class="features-grid">
                            <div class="feature-card" onclick="requireAuth('ai')">
                                <div class="feature-icon">ğŸ¤–</div>
                                <div class="feature-content">
                                    <div class="feature-title">AI Ã–neri Motoru</div>
                                    <div class="feature-desc">Ä°zleme alÄ±ÅŸkanlÄ±klarÄ±nÄ± analiz ederek sana Ã¶zel anime ve manga Ã¶nerileri Ã¼retir.</div>
                                </div>
                                <div class="feature-arrow">â†’</div>
                            </div>
                            <div class="feature-card" onclick="requireAuth('achievements')">
                                <div class="feature-icon">ğŸ†</div>
                                <div class="feature-content">
                                    <div class="feature-title">XP & BaÅŸarÄ±m Sistemi</div>
                                    <div class="feature-desc">Her eklediÄŸinde, tamamladÄ±ÄŸÄ±nda ve puan verdiÄŸinde XP kazan. Seviyeleri geÃ§, rozetler topla.</div>
                                </div>
                                <div class="feature-arrow">â†’</div>
                            </div>
                            <div class="feature-card" onclick="requireAuth('calendar')">
                                <div class="feature-icon">ğŸ“…</div>
                                <div class="feature-content">
                                    <div class="feature-title">HaftalÄ±k YayÄ±n Takvimi</div>
                                    <div class="feature-desc">Hangi anime hangi gÃ¼n yayÄ±nda? CanlÄ± takvimle takipte kal, listendekiler otomatik iÅŸaretlenir.</div>
                                </div>
                                <div class="feature-arrow">â†’</div>
                            </div>
                            <div class="feature-card" onclick="requireAuth('analytics')">
                                <div class="feature-icon">ğŸ“Š</div>
                                <div class="feature-content">
                                    <div class="feature-title">KiÅŸisel Analitik</div>
                                    <div class="feature-desc">KaÃ§ anime izledin, ortalama puanÄ±n ne? DetaylÄ± grafiklerle izleme alÄ±ÅŸkanlÄ±klarÄ±nÄ± keÅŸfet.</div>
                                </div>
                                <div class="feature-arrow">â†’</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">ğŸ”¥</div>
                                <div class="feature-content">
                                    <div class="feature-title">GÃ¼nlÃ¼k Streak</div>
                                    <div class="feature-desc">Her gÃ¼n giriÅŸ yap, streak'ini kÄ±r! 7 gÃ¼n Ã¼st Ã¼ste giriÅŸe bonus XP.</div>
                                </div>
                                <div class="feature-arrow">â†’</div>
                            </div>
                            <div class="feature-card">
                                <div class="feature-icon">ğŸ“¥</div>
                                <div class="feature-content">
                                    <div class="feature-title">Import & Export</div>
                                    <div class="feature-desc">Verilerini JSON veya CSV olarak indir. BaÅŸka platformlardan listenizi kolayca aktar.</div>
                                </div>
                                <div class="feature-arrow">â†’</div>
                            </div>
                        </div>
                    </div>

                    <!-- GUEST CTA -->
                    <div id="guestCTA" style="display:none;">
                        <div class="guest-cta-card">
                            <div class="guest-cta-icon">ğŸŒ</div>
                            <h3>Anime listenizi kaydedin!</h3>
                            <p>Ãœcretsiz hesap oluÅŸturun, izlediklerinizi takip edin, puan verin ve kiÅŸisel istatistiklerinizi gÃ¶rÃ¼n.</p>
                            <div class="guest-cta-btns">
                                <button class="btn btn-primary btn-large" onclick="openAuthModal('register')">âœ¨ Ãœcretsiz KayÄ±t Ol</button>
                                <button class="btn btn-ghost btn-large" onclick="openAuthModal('login')">GiriÅŸ Yap</button>
                            </div>
                        </div>
                    </div>

                    <!-- HIGH RATED -->
                    <div class="home-section-block">
                        <div class="section-header-row">
                            <h3 class="sh-title">ğŸ’¡ YÃ¼ksek PuanlÄ±</h3>
                            <button class="sh-more" onclick="requireAuth('ai')">AI Ã–nerileri â†’</button>
                        </div>
                        <div class="media-row" id="homeRecommendationsGrid"></div>
                    </div>

                    <!-- SUBTLE AD â€” High Rated altÄ± -->
                    <div class="ad-slot ad-slot-subtle" id="adSlot2">
                        <div class="ad-inner">
                            <span class="ad-tag">Reklam</span>
                            <div class="ad-placeholder">
                                <div class="ad-placeholder-inner">
                                    <span style="color:var(--text-muted);font-size:0.78rem;opacity:0.5;">Reklam AlanÄ± â€” 728Ã—90</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- COMMUNITY SECTION -->
                    <div class="community-section">
                        <div class="community-header">
                            <h3 class="features-title">ğŸŒ <span class="gradient-text">Topluluk</span></h3>
                            <p class="features-sub">TobiList bÃ¼yÃ¼yor â€” seninle bÃ¼yÃ¼yor</p>
                        </div>
                        <div class="community-grid">
                            <!-- Top users leaderboard -->
                            <div class="community-card leaderboard-card">
                                <div class="cc-title">ğŸ† XP Liderler</div>
                                <div id="leaderboardList">
                                    <div class="lb-loading">YÃ¼kleniyor...</div>
                                </div>
                                <div style="text-align:center;margin-top:1rem;">
                                    <button class="btn btn-secondary" onclick="requireAuth('profile')" style="font-size:0.82rem;padding:0.4rem 1rem;">Profilini GÃ¶r â†’</button>
                                </div>
                            </div>
                            <!-- Community stats -->
                            <div class="community-card community-stats-card">
                                <div class="cc-title">ğŸ“ˆ Platform Ä°statistikleri</div>
                                <div class="comm-stat-list">
                                    <div class="comm-stat-item">
                                        <div class="csi-label">ğŸ‘¥ Toplam KullanÄ±cÄ±</div>
                                        <div class="csi-val" id="commTotalUsers">â€”</div>
                                    </div>
                                    <div class="comm-stat-item">
                                        <div class="csi-label">ğŸ¬ Takip Edilen Anime</div>
                                        <div class="csi-val" id="commTotalAnime">â€”</div>
                                    </div>
                                    <div class="comm-stat-item">
                                        <div class="csi-label">âœ… Tamamlanan</div>
                                        <div class="csi-val" id="commCompleted">â€”</div>
                                    </div>
                                    <div class="comm-stat-item">
                                        <div class="csi-label">â­ Toplam XP</div>
                                        <div class="csi-val" id="commXP">â€”</div>
                                    </div>
                                    <div class="comm-stat-item">
                                        <div class="csi-label">ğŸ”¥ En Uzun Streak</div>
                                        <div class="csi-val" id="commLongestStreak">â€”</div>
                                    </div>
                                </div>
                            </div>
                            <!-- Join CTA -->
                            <div class="community-card join-card">
                                <div class="join-card-icon">ğŸ­</div>
                                <div class="cc-title" style="margin-bottom:0.5rem;">TopluluÄŸa KatÄ±l</div>
                                <p style="font-size:0.85rem;color:var(--text-secondary);line-height:1.6;margin-bottom:1.2rem;">
                                    Anime severlerin buluÅŸma noktasÄ±. Listeni oluÅŸtur, baÅŸarÄ±mlar kazan ve topluluÄŸun parÃ§asÄ± ol.
                                </p>
                                <div style="display:flex;flex-direction:column;gap:0.6rem;">
                                    <button class="btn btn-primary" onclick="openAuthModal('register')" style="width:100%;">âœ¨ Ãœcretsiz KatÄ±l</button>
                                    <button class="btn btn-ghost" onclick="switchSection('discover')" style="width:100%;">ğŸ” Ä°Ã§erikleri KeÅŸfet</button>
                                </div>
                                <div class="join-badges">
                                    <span class="jb">ğŸ†“ Ãœcretsiz</span>
                                    <span class="jb">ğŸ”’ GÃ¼venli</span>
                                    <span class="jb">ğŸ“± Mobil Uyumlu</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- FOOTER -->
                    <div class="site-footer">
                        <div class="footer-logo">
                            <svg width="20" height="20" viewBox="0 0 40 40" fill="none"><ellipse cx="20" cy="21" rx="17" ry="16" fill="#E8630A"/><path d="M20 13 Q24 13 26 17 Q28 21 24 23 Q20 25 18 22 Q16 19 18 17 Q19 15 20 14" stroke="#fff" stroke-width="1.2" fill="none" stroke-linecap="round" opacity="0.7"/><ellipse cx="24" cy="18" rx="4" ry="4.5" fill="#1a0a00"/><circle cx="25.5" cy="16.5" r="1.2" fill="rgba(255,255,255,0.5)"/><ellipse cx="20" cy="21" rx="17" ry="16" stroke="#c45500" stroke-width="1.5" fill="none"/></svg>
                            <span style="font-family:'Bebas Neue',cursive;font-size:1.1rem;letter-spacing:2px;background:linear-gradient(135deg,#ff3366,#00d4ff);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">TobiList</span>
                        </div>
                        <p style="color:var(--text-muted);font-size:0.78rem;margin-top:0.5rem;">Anime, Manga & Webtoon Takip Platformu Â· Ãœcretsiz Â· 2025</p>
                        <div class="footer-links">
                            <span onclick="switchSection('discover')" style="cursor:pointer;">KeÅŸfet</span>
                            <span>Â·</span>
                            <span onclick="openAuthModal('register')" style="cursor:pointer;">KayÄ±t Ol</span>
                            <span>Â·</span>
                            <span onclick="switchSection('home')" style="cursor:pointer;">Ana Sayfa</span>
                        </div>
                    </div>

                </div>

                <!-- DISCOVER -->
                <div id="discoverSection" class="section">
                    <div class="page-header">
                        <h2 class="page-title">ğŸ” KeÅŸfet</h2>
                        <p class="page-sub" id="discoverStats">Anime, manga ve webtoon dÃ¼nyasÄ±nÄ± keÅŸfet</p>
                    </div>
                    <div class="discover-tabs">
                        <button class="discover-tab active" onclick="filterDiscoverType('all', this)">TÃ¼mÃ¼</button>
                        <button class="discover-tab" onclick="filterDiscoverType('anime', this)">ğŸ¬ Anime</button>
                        <button class="discover-tab" onclick="filterDiscoverType('manga', this)">ğŸ“– Manga</button>
                        <button class="discover-tab" onclick="filterDiscoverType('webtoon', this)">ğŸ“± Webtoon</button>
                    </div>
                    <div class="genre-filters">
                        <button class="genre-tag active" onclick="filterByGenre('all', this)">TÃ¼mÃ¼</button>
                        <button class="genre-tag" onclick="filterByGenre('action', this)">âš”ï¸ Aksiyon</button>
                        <button class="genre-tag" onclick="filterByGenre('adventure', this)">ğŸ—ºï¸ Macera</button>
                        <button class="genre-tag" onclick="filterByGenre('comedy', this)">ğŸ˜‚ Komedi</button>
                        <button class="genre-tag" onclick="filterByGenre('drama', this)">ğŸ­ Drama</button>
                        <button class="genre-tag" onclick="filterByGenre('fantasy', this)">ğŸ”® Fantastik</button>
                        <button class="genre-tag" onclick="filterByGenre('romance', this)">ğŸ’• Romantik</button>
                        <button class="genre-tag" onclick="filterByGenre('scifi', this)">ğŸš€ Sci-Fi</button>
                        <button class="genre-tag" onclick="filterByGenre('horror', this)">ğŸ‘» Korku</button>
                        <button class="genre-tag" onclick="filterByGenre('mystery', this)">ğŸ” Gizem</button>
                        <button class="genre-tag" onclick="filterByGenre('psychological', this)">ğŸ§  Psikolojik</button>
                        <button class="genre-tag" onclick="filterByGenre('sports', this)">âš½ Spor</button>
                    </div>
                    <div class="discover-search-bar">
                        <div class="discover-search-box">
                            <span class="dsb-icon">ğŸ”</span>
                            <input type="text" id="discoverSearch" placeholder="Ara..." oninput="onDiscoverSearch()">
                        </div>
                        <select id="discoverSort" onchange="discoverPage=1; renderDiscoverGrid()">
                            <option value="rating">Puana GÃ¶re</option>
                            <option value="name">Ä°sme GÃ¶re</option>
                            <option value="year">YÄ±la GÃ¶re</option>
                        </select>
                    </div>
                    <div class="discover-grid" id="discoverGrid"></div>
                </div>

                <!-- LIBRARY -->
                <div id="librarySection" class="section">
                    <div class="page-header"><h2 class="page-title">ğŸ“š KÃ¼tÃ¼phanem</h2></div>
                    <div class="filter-bar">
                        <div class="search-box">
                            <input type="text" id="searchInput" placeholder="Ä°Ã§erik ara..." oninput="filterItems()">
                        </div>
                        <select id="typeFilter" onchange="filterItems()">
                            <option value="all">TÃ¼m Tipler</option>
                            <option value="anime">ğŸ¬ Anime</option>
                            <option value="manga">ğŸ“– Manga</option>
                            <option value="webtoon">ğŸ“± Webtoon</option>
                        </select>
                        <select id="statusFilter" onchange="filterItems()">
                            <option value="all">TÃ¼m Durumlar</option>
                            <option value="watching">â–¶ï¸ Ä°zliyorum</option>
                            <option value="completed">âœ… TamamlandÄ±</option>
                            <option value="onhold">â¸ï¸ Beklemede</option>
                            <option value="plantowatch">ğŸ“‹ Ä°zlenecek</option>
                            <option value="dropped">âŒ BÄ±rakÄ±ldÄ±</option>
                        </select>
                        <select id="sortBy" onchange="filterItems()">
                            <option value="recent">En Yeni</option>
                            <option value="name">Ä°sim (A-Z)</option>
                            <option value="rating">Puan</option>
                            <option value="progress">Ä°lerleme</option>
                        </select>
                    </div>
                    <div id="itemsGrid" class="items-grid"></div>
                </div>

                <!-- PROFILE -->
                <div id="profileSection" class="section">
                    <div class="profile-header-card">
                        <div class="profile-cover" id="profileCoverBg"></div>
                        <div class="profile-main">
                            <div class="profile-avatar-large" id="profileAvatarLarge" onclick="editProfile()" title="Profili dÃ¼zenle">ğŸ‘¤</div>
                            <div>
                                <h2 class="profile-username" id="profileUsername">KullanÄ±cÄ±</h2>
                                <p class="profile-email-display" id="profileEmailDisplay"></p>
                                <p class="profile-bio-text" id="profileBioText">Anime, manga ve webtoon takipÃ§isi</p>
                                <div class="profile-badges">
                                    <span class="profile-badge level-badge-sm">ğŸ† Lv. <span id="profileLvBadge">1</span></span>
                                    <span class="profile-badge streak-badge">ğŸ”¥ <span id="profileStreakBadge">0</span> gÃ¼n</span>
                                </div>
                                <div style="display:flex;gap:0.8rem;margin-top:1rem;flex-wrap:wrap;">
                                    <button class="btn btn-secondary" onclick="editProfile()">âœï¸ DÃ¼zenle</button>
                                    <button class="btn btn-ghost" onclick="shareProfile()">ğŸ“¤ PaylaÅŸ</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="profile-stats-grid">
                        <div class="profile-stat-card"><div class="psc-icon">ğŸ¬</div><div class="psc-val" id="profileTotalAnime">0</div><div class="psc-label">Anime</div></div>
                        <div class="profile-stat-card"><div class="psc-icon">ğŸ“–</div><div class="psc-val" id="profileTotalManga">0</div><div class="psc-label">Manga</div></div>
                        <div class="profile-stat-card"><div class="psc-icon">ğŸ“±</div><div class="psc-val" id="profileTotalWebtoon">0</div><div class="psc-label">Webtoon</div></div>
                        <div class="profile-stat-card"><div class="psc-icon">âœ…</div><div class="psc-val" id="profileCompletedTotal">0</div><div class="psc-label">Tamamlanan</div></div>
                        <div class="profile-stat-card"><div class="psc-icon">â­</div><div class="psc-val" id="profileXPTotal">0</div><div class="psc-label">Toplam XP</div></div>
                        <div class="profile-stat-card"><div class="psc-icon">ğŸ”¥</div><div class="psc-val" id="profileStreakVal">0</div><div class="psc-label">En Uzun Streak</div></div>
                    </div>
                    <div class="profile-two-col">
                        <div class="profile-section-block">
                            <h3 class="psb-title">ğŸ“‹ Son Aktiviteler</h3>
                            <div class="activity-list" id="activityList"></div>
                        </div>
                        <div class="profile-section-block">
                            <h3 class="psb-title">ğŸ’– Favori TÃ¼rler</h3>
                            <div class="favorite-genres" id="favoriteGenres"></div>
                            <h3 class="psb-title" style="margin-top:1.5rem;">ğŸ† Son BaÅŸarÄ±mlar</h3>
                            <div class="recent-achievements" id="recentAchievements"></div>
                        </div>
                    </div>
                    <div class="profile-section-block">
                        <h3 class="psb-title">ğŸ“¤ PaylaÅŸ & DÄ±ÅŸa Aktar</h3>
                        <div class="share-btns">
                            <button class="share-btn twitter" onclick="shareToTwitter()">ğŸ¦ Twitter</button>
                            <button class="share-btn copy" onclick="copyProfileLink()">ğŸ”— Link Kopyala</button>
                            <button class="share-btn export" onclick="exportData('json')">ğŸ“¥ JSON Ä°ndir</button>
                        </div>
                    </div>
                </div>

                <!-- CALENDAR -->
                <div id="calendarSection" class="section">
                    <div class="page-header"><h2 class="page-title">ğŸ“… YayÄ±n Takvimi</h2></div>
                    <div class="calendar-container">
                        <div class="calendar-header-row">
                            <span>HaftalÄ±k YayÄ±n Takvimi</span>
                            <button class="btn btn-secondary" onclick="syncCalendar()">ğŸ”„ Senkronize Et</button>
                        </div>
                        <div class="weekdays" id="weekdaysContainer"></div>
                    </div>
                </div>

                <!-- ANALYTICS -->
                <div id="analyticsSection" class="section">
                    <div class="page-header"><h2 class="page-title">ğŸ“Š Analitik</h2></div>
                    <div class="analytics-grid" id="analyticsGrid"></div>
                </div>

                <!-- AI -->
                <div id="aiSection" class="section">
                    <div class="ai-header-card">
                        <div class="ai-header-glow"></div>
                        <div class="ai-header-content">
                            <div class="ai-robot-icon">ğŸ¤–</div>
                            <div>
                                <h2 class="ai-title">AI Ã–neri Motoru</h2>
                                <p class="ai-sub">Ä°zleme alÄ±ÅŸkanlÄ±klarÄ±nÄ± analiz ederek sana Ã¶zel iÃ§erikler buluyor</p>
                            </div>
                        </div>
                        <div class="ai-analysis-cards">
                            <div class="aac"><div class="aac-icon">ğŸ“Š</div><div class="aac-label">Ä°zleme Paterni</div><div class="aac-val" id="aiWatchingPattern">-</div></div>
                            <div class="aac"><div class="aac-icon">ğŸ¯</div><div class="aac-label">Favori TÃ¼r</div><div class="aac-val" id="aiFavoriteGenres">-</div></div>
                            <div class="aac"><div class="aac-icon">â­</div><div class="aac-label">Ort. Puan</div><div class="aac-val" id="aiAvgRating">-</div></div>
                            <div class="aac"><div class="aac-icon">ğŸ”®</div><div class="aac-label">AI DoÄŸruluÄŸu</div><div class="aac-val">98%</div></div>
                        </div>
                        <div class="ai-btn-row">
                            <button class="btn btn-primary btn-large" onclick="generateAIRecommendations()">âœ¨ Yeni Ã–neriler Al</button>
                            <button class="btn btn-secondary" onclick="refreshAIAnalysis()">ğŸ”„ Yenile</button>
                        </div>
                    </div>
                    <div class="ai-recs-section">
                        <div class="section-header-row">
                            <h3 class="sh-title">ğŸ’ Size Ã–zel</h3>
                        </div>
                        <div class="media-row" id="aiRecommendations"></div>
                    </div>
                    <div class="ai-recs-section">
                        <div class="section-header-row">
                            <h3 class="sh-title">ğŸ­ BeÄŸendiklerinize Benzer</h3>
                        </div>
                        <div class="media-row" id="aiSimilarRecommendations"></div>
                    </div>
                </div>

                <!-- ACHIEVEMENTS -->
                <div id="achievementsSection" class="section">
                    <div class="page-header">
                        <h2 class="page-title">ğŸ† BaÅŸarÄ±mlar</h2>
                        <p class="page-sub">Ä°Ã§erik ekle, tamamla ve seviyeleri geÃ§</p>
                    </div>
                    <div id="achievementsGrid" class="achievements-grid"></div>
                </div>

                <!-- SETTINGS -->

                <!-- ===== DETAY SAYFASI ===== -->
                <div id="detailSection" class="section">
                    <!-- Breadcrumb -->
                    <div class="dp-breadcrumb">
                        <span onclick="goBackFromDetail()" style="cursor:pointer;color:var(--text-muted);">ğŸ  Ana Sayfa</span>
                        <span style="color:var(--text-muted);"> / </span>
                        <span id="dpBreadcrumbTitle" style="color:var(--text1);">Ä°Ã§erik</span>
                    </div>

                    <!-- Banner -->
                    <div class="dp-banner" id="dpBannerBg">
                        <div class="dp-banner-overlay"></div>
                        <div class="dp-banner-content">
                            <img id="dpPoster" src="" alt="" class="dp-poster">
                            <div class="dp-header-info">
                                <span id="dpTypeBadge" class="dp-type-badge anime">ANÄ°ME</span>
                                <h1 id="dpTitle" class="dp-title">â€”</h1>
                                <div class="dp-stats-row">
                                    <div class="dp-stat">â­ <span id="dpScore">â€”</span></div>
                                    <div class="dp-stat">ğŸ“… <span id="dpYear">â€”</span></div>
                                    <div class="dp-stat">ğŸ¬ <span id="dpEpisodes">â€”</span></div>
                                    <div class="dp-stat">ğŸ“Š <span id="dpStatus">â€”</span></div>
                                </div>
                                <div id="dpGenres" class="dp-genres-row"></div>
                                <div class="dp-action-row">
                                    <button id="dpAddBtn" class="dp-add-btn">+ Listeye Ekle</button>
                                    <button class="dp-back-btn" onclick="goBackFromDetail()">â† Geri</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Main grid -->
                    <div class="dp-body">
                        <!-- Sol: Ã–zet + Yorumlar -->
                        <div class="dp-main-col">
                            <!-- Ã–zet -->
                            <div class="dp-card">
                                <h3 class="dp-card-title">ğŸ“– Ã–zet</h3>
                                <p id="dpSynopsis" class="dp-synopsis">YÃ¼kleniyor...</p>
                            </div>

                            <!-- Yorum Yaz -->
                            <div class="dp-card" id="reviewFormCard">
                                <h3 class="dp-card-title">âœï¸ Puan & Yorum</h3>
                                <div class="review-form">
                                    <div class="star-row">
                                        <div class="stars-container">
                                            <button class="star-btn" onclick="setStarRating(1)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(2)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(3)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(4)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(5)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(6)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(7)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(8)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(9)">â˜…</button>
                                            <button class="star-btn" onclick="setStarRating(10)">â˜…</button>
                                        </div>
                                        <span id="ratingText" class="rating-text">Puan seÃ§</span>
                                    </div>
                                    <textarea id="reviewComment" class="review-textarea" placeholder="DÃ¼ÅŸÃ¼ncelerini yaz (isteÄŸe baÄŸlÄ±)..." rows="3"></textarea>
                                    <button id="reviewSubmitBtn" class="review-submit-btn" onclick="submitReview()">ğŸ’¬ Yorumu GÃ¶nder</button>
                                </div>
                            </div>

                            <!-- Yorumlar -->
                            <div class="dp-card">
                                <div class="dp-card-header">
                                    <h3 class="dp-card-title">ğŸ’¬ Yorumlar</h3>
                                    <div class="review-summary">
                                        <span id="dpUserScore" class="review-avg">â€”</span>
                                        <span id="dpReviewCount" style="color:var(--text-muted);font-size:0.8rem;">0 yorum</span>
                                    </div>
                                </div>
                                <div id="reviewsList"></div>
                            </div>
                        </div>

                        <!-- SaÄŸ: Detaylar -->
                        <div class="dp-side-col">
                            <div class="dp-card dp-info-card">
                                <h3 class="dp-card-title">â„¹ï¸ Bilgiler</h3>
                                <div class="dp-info-list">
                                    <div class="dp-info-row"><span class="dp-info-label">TÃ¼r</span><span id="dpTypeSide">â€”</span></div>
                                    <div class="dp-info-row"><span class="dp-info-label">SÄ±ralama</span><span id="dpRank">â€”</span></div>
                                    <div class="dp-info-row"><span class="dp-info-label">Ãœye</span><span id="dpMembers">â€”</span></div>
                                    <div class="dp-info-row"><span class="dp-info-label">StÃ¼dyo</span><span id="dpStudio">â€”</span></div>
                                    <div class="dp-info-row"><span class="dp-info-label">Durum</span><span id="dpStatusSide">â€”</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Benzer Ä°Ã§erikler -->
                    <div class="home-section-block" style="margin-top:2rem;">
                        <div class="section-header-row">
                            <h3 class="sh-title">ğŸ¯ Benzer Ä°Ã§erikler</h3>
                        </div>
                        <div class="media-row" id="similarGrid"></div>
                    </div>
                </div>

                <div id="settingsSection" class="section">
                    <div class="page-header"><h2 class="page-title">âš™ï¸ Ayarlar</h2></div>
                    <div class="settings-grid">
                        <div class="chart-container">
                            <h3 class="chart-title">ğŸ¨ Tema</h3>
                            <div class="theme-grid">
                                <div class="theme-option theme-dark active" onclick="setTheme('dark')"><div class="theme-name">KaranlÄ±k</div></div>
                                <div class="theme-option theme-light" onclick="setTheme('light')"><div class="theme-name">AydÄ±nlÄ±k</div></div>
                                <div class="theme-option theme-neon" onclick="setTheme('neon')"><div class="theme-name">Neon</div></div>
                                <div class="theme-option theme-pastel" onclick="setTheme('pastel')"><div class="theme-name">Pastel</div></div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <h3 class="chart-title">ğŸ“¤ Veri YÃ¶netimi</h3>
                            <p style="color:var(--text-secondary);font-size:0.88rem;margin-bottom:1rem;">Verilerinizi dÄ±ÅŸa aktarÄ±n veya iÃ§e aktarÄ±n</p>
                            <div style="display:flex;gap:0.8rem;flex-wrap:wrap;">
                                <button class="btn btn-primary" onclick="exportData('json')">ğŸ“¥ JSON Ä°ndir</button>
                                <button class="btn btn-primary" onclick="exportData('csv')">ğŸ“¥ CSV Ä°ndir</button>
                                <button class="btn btn-secondary" onclick="importData()">ğŸ“¤ Veri YÃ¼kle</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <h3 class="chart-title">ğŸ”” Bildirimler</h3>
                            <label class="toggle-label">
                                <input type="checkbox" id="pushNotifications" onchange="toggleNotifications()">
                                <span>Push bildirimleri etkinleÅŸtir</span>
                            </label>
                        </div>
                        <div class="chart-container danger-zone">
                            <h3 class="chart-title">âš ï¸ Hesap Ä°ÅŸlemleri</h3>
                            <p style="color:var(--text-secondary);font-size:0.85rem;margin-bottom:1rem;">Bu iÅŸlemler geri alÄ±namaz.</p>
                            <button class="btn-danger" onclick="handleLogout()">ğŸšª Ã‡Ä±kÄ±ÅŸ Yap</button>
                            <button class="btn-danger-outline" onclick="deleteAccount()">ğŸ—‘ï¸ HesabÄ± Sil</button>
                        </div>
                    </div>
                </div>

            </div><!-- /main-content -->
        </div><!-- /container -->

        <!-- Add Modal -->
        <div id="addModal" class="modal" style="display:none;">
            <div class="modal-content">
                <div class="modal-top">
                    <h2 class="modal-title">âœ¨ Yeni Ä°Ã§erik Ekle</h2>
                    <button class="modal-close" onclick="closeModal()">âœ•</button>
                </div>
                <form id="addForm" onsubmit="addItem(event)">
                    <div class="form-group">
                        <label>ğŸ” Jikan API'den Ara (opsiyonel)</label>
                        <input type="text" id="apiSearch" placeholder="Anime veya manga adÄ± yazÄ±n..." oninput="searchAPI()">
                        <div id="apiResults"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Ä°sim *</label>
                            <input type="text" id="itemName" required placeholder="Anime / Manga adÄ±">
                        </div>
                        <div class="form-group">
                            <label>Tip *</label>
                            <select id="itemType" required>
                                <option value="anime">ğŸ¬ Anime</option>
                                <option value="manga">ğŸ“– Manga</option>
                                <option value="webtoon">ğŸ“± Webtoon</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Poster URL (opsiyonel)</label>
                        <input type="url" id="itemPoster" placeholder="https://...">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Durum</label>
                            <select id="itemStatus">
                                <option value="plantowatch">ğŸ“‹ Ä°zlenecek</option>
                                <option value="watching">â–¶ï¸ Ä°zliyorum</option>
                                <option value="completed">âœ… TamamlandÄ±</option>
                                <option value="onhold">â¸ï¸ Beklemede</option>
                                <option value="dropped">âŒ BÄ±rakÄ±ldÄ±</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>TÃ¼r</label>
                            <select id="itemGenre">
                                <option value="">SeÃ§iniz</option>
                                <option value="action">Aksiyon</option>
                                <option value="adventure">Macera</option>
                                <option value="comedy">Komedi</option>
                                <option value="drama">Drama</option>
                                <option value="fantasy">Fantastik</option>
                                <option value="romance">Romantik</option>
                                <option value="scifi">Sci-Fi</option>
                                <option value="horror">Korku</option>
                                <option value="mystery">Gizem</option>
                                <option value="sports">Spor</option>
                                <option value="psychological">Psikolojik</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Notlar</label>
                        <textarea id="itemNotes" rows="2" placeholder="DÃ¼ÅŸÃ¼ncelerinizi yazÄ±n..."></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeModal()">Ä°ptal</button>
                        <button type="submit" class="btn btn-primary">âœ¨ Ekle</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Edit Profile Modal -->
        <div id="editProfileModal" class="modal" style="display:none;">
            <div class="modal-content">
                <div class="modal-top">
                    <h2 class="modal-title">âœï¸ Profili DÃ¼zenle</h2>
                    <button class="modal-close" onclick="closeEditProfile()">âœ•</button>
                </div>
                <form id="editProfileForm" onsubmit="saveProfile(event)">
                    <div class="form-group">
                        <label>KullanÄ±cÄ± AdÄ±</label>
                        <input type="text" id="editUsername" required maxlength="30">
                    </div>
                    <div class="form-group">
                        <label>Bio</label>
                        <textarea id="editBio" rows="3" placeholder="Kendinizi tanÄ±tÄ±n..." maxlength="200"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Avatar SeÃ§</label>
                        <div class="avatar-selector">
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ‘¤')">ğŸ‘¤</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ˜Š')">ğŸ˜Š</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ®')">ğŸ®</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ¬')">ğŸ¬</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ“º')">ğŸ“º</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸŒŸ')">ğŸŒŸ</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('âš¡')">âš¡</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ”¥')">ğŸ”¥</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ’«')">ğŸ’«</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ¯')">ğŸ¯</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ‰')">ğŸ‰</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('âš”ï¸')">âš”ï¸</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸŒ™')">ğŸŒ™</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸ¦Š')">ğŸ¦Š</button>
                            <button type="button" class="avatar-option" onclick="selectAvatar('ğŸŒ¸')">ğŸŒ¸</button>
                        </div>
                        <input type="hidden" id="selectedAvatar" value="ğŸ‘¤">
                    </div>
                    <div class="form-group">
                        <label>Kapak Rengi</label>
                        <div class="cover-colors">
                            <div class="cc-opt" style="background:linear-gradient(135deg,#ff3366,#7c3aed)" onclick="selectCoverColor('gradient1')" data-color="gradient1"></div>
                            <div class="cc-opt" style="background:linear-gradient(135deg,#00d4ff,#0ea5e9)" onclick="selectCoverColor('gradient2')" data-color="gradient2"></div>
                            <div class="cc-opt" style="background:linear-gradient(135deg,#10b981,#059669)" onclick="selectCoverColor('gradient3')" data-color="gradient3"></div>
                            <div class="cc-opt" style="background:linear-gradient(135deg,#f59e0b,#ef4444)" onclick="selectCoverColor('gradient4')" data-color="gradient4"></div>
                            <div class="cc-opt" style="background:linear-gradient(135deg,#8b5cf6,#ec4899)" onclick="selectCoverColor('gradient5')" data-color="gradient5"></div>
                        </div>
                        <input type="hidden" id="selectedCoverColor" value="gradient1">
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditProfile()">Ä°ptal</button>
                        <button type="submit" class="btn btn-primary">ğŸ’¾ Kaydet</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="notification"></div>

        <!-- Import Input -->
        <input type="file" id="importInput" accept=".json,.csv" style="display:none;" onchange="handleImport(event)">

    </div><!-- /mainApp -->

    <!-- Scripts - DOÄRU SIRADA -->
    <script src="js/data-manager.js"></script>
    <script src="js/xp-system.js"></script>
    <script src="js/api.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
    <script src="js/auth.js"></script>

    <!-- Home page live stats & leaderboard -->
    <script>
    // Supabase'den canlÄ± platform istatistiklerini Ã§eker
    async function loadHomeLiveStats() {
        try {
            if (!window.supabaseClient) return;
            const { data } = await window.supabaseClient
                .from('user_data')
                .select('user_id,data');
            if (!data) return;

            let users=data.length, entries=0, completed=0, xpTotal=0, longestStreak=0;
            const topUsers=[];
            data.forEach(row=>{
                const d=row.data;
                if(!d) return;
                if(d.items){ entries+=d.items.length; completed+=d.items.filter(i=>i.status==='completed').length; }
                if(d.xp?.total){ xpTotal+=d.xp.total; topUsers.push({name:d.social?.name||'KullanÄ±cÄ±',avatar:d.social?.avatar||'ğŸ‘¤',xp:d.xp.total,level:d.xp.level||1}); }
                if(d.streak?.longest>longestStreak) longestStreak=d.streak.longest;
            });
            topUsers.sort((a,b)=>b.xp-a.xp);

            // Platform stats bar
            const fmt=n=>n>=1000?(n/1000).toFixed(1)+'K':n;
            const s=(id,v)=>{const e=document.getElementById(id);if(e)e.textContent=fmt(v);};
            s('liveUserCount',users); s('liveEntryCount',entries);
            s('liveCompletedCount',completed); s('liveXPCount',xpTotal);

            // Community card stats
            s('commTotalUsers',users); s('commCompleted',completed);
            const ae=document.getElementById('commTotalAnime');
            let anime=0; data.forEach(r=>{ anime+=(r.data?.items||[]).filter(i=>i.type==='anime').length; });
            if(ae) ae.textContent=fmt(anime);
            const xe=document.getElementById('commXP'); if(xe) xe.textContent=fmt(xpTotal)+' XP';
            const lse=document.getElementById('commLongestStreak'); if(lse) lse.textContent=longestStreak+' gÃ¼n';

            // Leaderboard
            const lb=document.getElementById('leaderboardList');
            if(lb){
                const top=topUsers.slice(0,5);
                if(!top.length){ lb.innerHTML='<div class="lb-loading">HenÃ¼z kullanÄ±cÄ± yok</div>'; return; }
                const rankClass=['gold','silver','bronze'];
                lb.innerHTML=top.map((u,i)=>`
                    <div class="lb-item">
                        <span class="lb-rank ${rankClass[i]||''}">${i===0?'ğŸ¥‡':i===1?'ğŸ¥ˆ':i===2?'ğŸ¥‰':'#'+(i+1)}</span>
                        <div class="lb-av">${u.avatar}</div>
                        <span class="lb-name">${u.name}</span>
                        <span class="lb-xp">â­${fmt(u.xp)} XP</span>
                    </div>`).join('');
            }
        } catch(e){ console.warn('Live stats error:',e); }
    }

    // Sayfa yÃ¼klenince Ã§alÄ±ÅŸtÄ±r, 60 saniyede bir yenile
    document.addEventListener('DOMContentLoaded',()=>{
        setTimeout(loadHomeLiveStats, 2000);
        setInterval(loadHomeLiveStats, 60000);
        setTimeout(function(){ if(window.checkAnnouncements) window.checkAnnouncements(); }, 1500);
    });

    // ===== DUYURU SÄ°STEMÄ° - MODAL =====
    window.checkAnnouncements = async function() {
        if (!window.supabaseClient) return;
        try {
            var r = await window.supabaseClient
                .from('announcements')
                .select('*')
                .order('created_at', { ascending: false })
                .limit(10);
            if (r.error || !r.data || !r.data.length) return;
            var dismissed = [];
            try { dismissed = JSON.parse(localStorage.getItem('dismissed_announcements')||'[]'); } catch(e){}
            // String karÅŸÄ±laÅŸtÄ±rmasÄ± - number/string uyumsuzluÄŸunu Ã¶nler
            var dismissedStr = dismissed.map(function(d){ return String(d); });
            var visible = r.data.filter(function(a){ return !dismissedStr.includes(String(a.id)); });
            if (!visible.length) return;
            _showAnnModal(visible[0]);
        } catch(e) { console.warn('Ann check failed:', e); }
    };

    // loadAnnouncements = checkAnnouncements (eski Ã§aÄŸrÄ±lar iÃ§in alias)
    window.loadAnnouncements = window.checkAnnouncements;

    function _showAnnModal(ann) {
        if (document.getElementById('annModal')) return;
        var icons = { info:'â„¹ï¸', success:'âœ…', warning:'âš ï¸', update:'ğŸš€' };
        var themes = {
            info:    { accent:'#00d4ff', glow:'rgba(0,212,255,0.3)',    badge:'#00d4ff', badgeText:'#000', grad:'rgba(0,212,255,0.1)' },
            success: { accent:'#10b981', glow:'rgba(16,185,129,0.3)',   badge:'#10b981', badgeText:'#000', grad:'rgba(16,185,129,0.1)' },
            warning: { accent:'#f59e0b', glow:'rgba(245,158,11,0.3)',   badge:'#f59e0b', badgeText:'#000', grad:'rgba(245,158,11,0.1)' },
            update:  { accent:'#8b5cf6', glow:'rgba(139,92,246,0.3)',   badge:'#8b5cf6', badgeText:'#fff', grad:'rgba(139,92,246,0.1)' }
        };
        var t = themes[ann.type] || themes.update;
        var icon = icons[ann.type] || 'ğŸ“¢';
        var labels = { info:'BÄ°LGÄ°', success:'BAÅARILI', warning:'UYARI', update:'GÃœNCELLEME' };
        var prio = ann.priority === 'critical' ? 'ğŸ”´ ACÄ°L' : ann.priority === 'high' ? 'ğŸŸ  Ã–NEMLÄ°' : '';
        var dateStr = '';
        try { dateStr = new Date(ann.created_at).toLocaleDateString('tr-TR',{day:'numeric',month:'long',year:'numeric'}); } catch(e){}

        var style = document.createElement('style');
        style.textContent = '@keyframes annFadeIn{from{opacity:0}to{opacity:1}} @keyframes annSlideUp{from{transform:scale(0.88) translateY(30px);opacity:0}to{transform:scale(1) translateY(0);opacity:1}}';
        document.head.appendChild(style);

        var overlay = document.createElement('div');
        overlay.id = 'annModal';
        overlay.style.cssText = 'position:fixed;inset:0;z-index:999999;display:flex;align-items:center;justify-content:center;padding:1rem;background:rgba(0,0,0,0.75);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);animation:annFadeIn 0.3s ease;';
        overlay.innerHTML = '<div style="background:#0f1420;border:1px solid '+t.accent+'55;border-radius:22px;width:100%;max-width:460px;overflow:hidden;box-shadow:0 0 80px '+t.glow+',0 25px 60px rgba(0,0,0,0.7);animation:annSlideUp 0.4s cubic-bezier(0.175,0.885,0.32,1.275);">'
            +'<div style="height:4px;background:linear-gradient(90deg,'+t.accent+','+t.accent+'66);"></div>'
            +'<div style="padding:1.8rem;">'
            +'<div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:1.3rem;">'
            +'<div style="display:flex;align-items:center;gap:0.5rem;">'
            +'<span style="background:'+t.badge+';color:'+t.badgeText+';font-size:0.65rem;font-weight:800;letter-spacing:1.5px;padding:3px 10px;border-radius:20px;font-family:DM Sans,sans-serif;">'+(labels[ann.type]||'DUYURU')+'</span>'
            +(prio ? '<span style="font-size:0.75rem;font-weight:700;color:'+t.accent+';">'+prio+'</span>' : '')
            +'</div>'
            +'<button id="annCloseBtn" style="background:rgba(255,255,255,0.07);border:1px solid rgba(255,255,255,0.12);border-radius:8px;color:#8892a4;cursor:pointer;width:32px;height:32px;font-size:1rem;display:flex;align-items:center;justify-content:center;line-height:1;">âœ•</button>'
            +'</div>'
            +'<div style="display:flex;align-items:flex-start;gap:1rem;margin-bottom:1.1rem;">'
            +'<div style="width:52px;height:52px;border-radius:14px;background:'+t.grad+';border:1px solid '+t.accent+'33;display:flex;align-items:center;justify-content:center;font-size:1.7rem;flex-shrink:0;">'+icon+'</div>'
            +'<div style="flex:1;">'
            +'<h3 style="color:#fff;font-size:1.05rem;font-weight:700;margin:0 0 4px;font-family:DM Sans,sans-serif;line-height:1.3;">'+(ann.title||'')+'</h3>'
            +(dateStr ? '<div style="color:#6b7280;font-size:0.75rem;font-family:DM Sans,sans-serif;">'+dateStr+'</div>' : '')
            +'</div></div>'
            +(ann.content||ann.body ? '<div style="background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);border-left:3px solid '+t.accent+';border-radius:10px;padding:0.9rem 1rem;color:#c0c8d8;font-size:0.88rem;line-height:1.6;font-family:DM Sans,sans-serif;margin-bottom:1.3rem;">'+(ann.content||ann.body)+'</div>' : '<div style="margin-bottom:1rem;"></div>')
            +'<button id="annOkBtn" style="width:100%;padding:0.8rem;background:linear-gradient(135deg,'+t.accent+','+t.accent+'aa);border:none;border-radius:12px;color:'+t.badgeText+';font-size:0.9rem;font-weight:700;font-family:DM Sans,sans-serif;cursor:pointer;box-shadow:0 4px 20px '+t.glow+';">AnladÄ±m âœ“</button>'
            +'</div></div>';

        document.body.appendChild(overlay);

        function close() {
            var dismissed = [];
            try { dismissed = JSON.parse(localStorage.getItem('dismissed_announcements')||'[]'); } catch(e){}
            if (!dismissed.map(function(d){return String(d);}).includes(String(ann.id))) {
                dismissed.push(String(ann.id));
                localStorage.setItem('dismissed_announcements', JSON.stringify(dismissed));
            }
            overlay.style.transition = 'opacity 0.3s';
            overlay.style.opacity = '0';
            setTimeout(function(){ if(overlay.parentNode) overlay.parentNode.removeChild(overlay); }, 300);
        }

        document.getElementById('annCloseBtn').onclick = close;
        document.getElementById('annOkBtn').onclick = close;
        overlay.addEventListener('click', function(e){ if(e.target===overlay) close(); });
    }

    window.dismissAnnouncement = function(id) {
        var el = document.getElementById('annModal');
        if (el) {
            el.style.transition = 'opacity 0.3s';
            el.style.opacity = '0';
            setTimeout(function(){ if(el.parentNode) el.parentNode.removeChild(el); }, 300);
        }
        var dismissed = [];
        try { dismissed = JSON.parse(localStorage.getItem('dismissed_announcements')||'[]'); } catch(e){}
        if (!dismissed.map(function(d){return String(d);}).includes(String(id))) {
            dismissed.push(String(id));
            localStorage.setItem('dismissed_announcements', JSON.stringify(dismissed));
        }
    };
    </script>
</body>
</html>